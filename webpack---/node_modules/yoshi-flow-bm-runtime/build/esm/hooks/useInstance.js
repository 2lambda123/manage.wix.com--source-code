import { useEffect, useState } from 'react';
import { appDefIds } from '@wix/business-manager-api';
import useModuleInfo from './useModuleInfo';
import { useBusinessManagerAPI } from './useBusinessManagerAPI';
export const useInstance = (maybeAppDefId) => {
    var _a;
    const { appDefId: configAppDefId } = useModuleInfo();
    const { getCurrentInstance, registerToInstanceChanges, } = useBusinessManagerAPI();
    const appDefId = (_a = maybeAppDefId !== null && maybeAppDefId !== void 0 ? maybeAppDefId : configAppDefId) !== null && _a !== void 0 ? _a : appDefIds.metaSite;
    const [instance, setInstance] = useState(() => getCurrentInstance(appDefId));
    useEffect(() => {
        const { remove } = registerToInstanceChanges(appDefId, setInstance);
        return remove;
    }, [appDefId, setInstance]);
    return instance;
};
//# sourceMappingURL=useInstance.js.map