import * as i18next from 'i18next';
import abTranslate from 'ab-translate/dist/src/abTranslate-runtime';
import * as XHR from 'i18next-xhr-backend';
export var i18nInstance = i18next.createInstance();
export default function i18nClient(_a) {
    var locale = _a.locale, experiments = _a.experiments, translationsBaseUrl = _a.translationsBaseUrl, callback = _a.callback;
    return i18nInstance.use(XHR).init({
        keySeparator: '$',
        lng: locale,
        fallbackLng: 'en',
        interpolation: {
            escapeValue: false,
        },
        react: {
            wait: true,
        },
        backend: {
            loadPath: translationsBaseUrl + "assets/locale/site-actions-dropdown-translations/messages_" + locale + ".json",
            crossDomain: true,
            parse: function (translations) {
                try {
                    return abTranslate(experiments, JSON.parse(translations));
                }
                catch (e) {
                    return translations;
                }
            },
        },
    }, callback);
}
//# sourceMappingURL=root-i18n.js.map