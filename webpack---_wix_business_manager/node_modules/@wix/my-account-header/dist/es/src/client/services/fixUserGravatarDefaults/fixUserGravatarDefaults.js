import { __assign } from "tslib";
import * as URI from 'urijs';
export var fixUserGravatarDefaults = function (headerDataResponse) {
    var user = headerDataResponse.user, account = headerDataResponse.account;
    return __assign(__assign(__assign({}, headerDataResponse), { user: __assign(__assign({}, user), { profileImage: fixGravatarDefaultIfNeeded(user.profileImage) }) }), (!!account && {
        account: __assign(__assign({}, account), { accountImg: fixGravatarDefaultIfNeeded(account.accountImg) })
    }));
};
var fixGravatarDefaultIfNeeded = function (img) {
    if (hasGravatarProfileImage(img)) {
        return URI(img).query({ d: '404' }).toString();
    }
    else {
        return img;
    }
};
var hasGravatarProfileImage = function (profileImage) { return profileImage && URI(profileImage).hostname().includes('gravatar.com'); };
//# sourceMappingURL=fixUserGravatarDefaults.js.map