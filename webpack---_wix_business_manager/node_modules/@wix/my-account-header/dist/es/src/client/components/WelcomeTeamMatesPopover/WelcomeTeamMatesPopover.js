import { __extends } from "tslib";
import * as React from 'react';
import { Popover, Text } from 'wix-style-react';
import * as css from './WelcomeTeamMatesPopover.scss';
import X from 'wix-ui-icons-common/X';
var PopoverComponent = /** @class */ (function (_super) {
    __extends(PopoverComponent, _super);
    function PopoverComponent(props) {
        var _this = _super.call(this, props) || this;
        _this.onCloseClick = function (e) {
            _this.setState({
                shouldDisplayPopover: false
            });
            e.stopPropagation();
        };
        _this.state = {
            shouldDisplayPopover: false
        };
        return _this;
    }
    PopoverComponent.prototype.componentDidMount = function () {
        var _this = this;
        var _a = this.props, accountId = _a.accountId, userId = _a.userId, getWasPopoverDisplayedBefore = _a.getWasPopoverDisplayedBefore, setPopoverDisplayed = _a.setPopoverDisplayed;
        getWasPopoverDisplayedBefore()
            .then(function (wasPopoverDisplayed) {
            var isContributor = accountId && userId && !(accountId === userId);
            var shouldDisplayPopover = !wasPopoverDisplayed && isContributor;
            if (shouldDisplayPopover) {
                _this.setState({ shouldDisplayPopover: true });
                setPopoverDisplayed();
            }
        });
    };
    PopoverComponent.prototype.render = function () {
        var _a = this.props, children = _a.children, t = _a.t;
        return (React.createElement(Popover, { placement: "bottom-end", shown: this.state.shouldDisplayPopover, theme: "dark", showArrow: true, moveBy: { y: 19, x: 50 }, dataHook: "welcome-teammates-popover" },
            React.createElement(Popover.Element, null,
                React.createElement("div", null, children)),
            React.createElement(Popover.Content, null,
                React.createElement("div", { className: css.welcomePopoverWrapper, "data-hook": "welcome-teammates-popover-container" },
                    React.createElement("div", { "data-hook": "welcome-popover-close-button", onClick: this.onCloseClick, className: css.welcomePopoverCloseButton },
                        React.createElement(X, { size: "16px" })),
                    React.createElement("div", { className: css.welcomePopoverContent },
                        React.createElement("div", { className: css.welcomePopoverTexts },
                            React.createElement(Text, { light: true, weight: "normal", className: css.welcomePopoverTitle }, t('welcome-teammates-popover.title')),
                            React.createElement(Text, { light: true }, t('welcome-teammates-popover.text'))),
                        React.createElement("div", { className: css.welcomePopoverImage }))))));
    };
    return PopoverComponent;
}(React.PureComponent));
export { PopoverComponent };
//# sourceMappingURL=WelcomeTeamMatesPopover.js.map